<div class="comment-container">
  <div class="comment-header">
    <div class="avatar-container">
      <img [src]="comment.authorAvatar" alt="Avatar" class="comment-avatar" />
    </div>
    <div class="comment-author">{{ comment.authorName }}</div>
    <div class="comment-date">{{ comment.date | date: 'short' }}</div>
  </div>
  <p class="comment-text">{{ comment.text }}</p>

  <!-- Sezione footer per Rispondi -->
  <div class="comment-footer">
    <button (click)="likeComment()" class="like-button">
      {{ hasLiked ? '👎 Togli Mi Piace' : '👍 Mi Piace' }}
      <span *ngIf="comment.likes > 0">({{ comment.likes }})</span>
    </button>
    <button class="reply-button" (click)="onReply()">
      {{ isReplying ? 'Annulla' : 'Rispondi' }}
    </button>
  </div>

  <!-- Modulo per rispondere -->
  <div *ngIf="isReplying" class="reply-form">
    <textarea
      [(ngModel)]="newComment.text"
      class="reply-input"
      placeholder="Scrivi la tua risposta..."
      #replyInput>
    </textarea>
    <button
      class="submit-button"
      (click)="submitReply(replyInput.value)">
      Invia
    </button>
  </div>

  <!-- Visualizza le risposte -->
  <div *ngIf="comment.replies.length > 0" class="replies">
    <div class="comment-container" *ngFor="let reply of comment.replies">
      <div class="comment-header">
        <div class="avatar-container">
          <img [src]="'Avatar.png'" alt="Avatar" class="comment-avatar" />
        </div>
        <div class="comment-author">{{ reply.authorName }}</div>
        <div class="comment-date">{{ reply.date | date: 'short' }}</div>
      </div>
      <p class="comment-text">{{ reply.text }}</p>
    </div>
  </div>
</div>
